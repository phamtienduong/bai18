<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        let stores = [{ id: 1, name: "Milk", count: 100},
         {id: 2, name: "Yakult", count: 100},
         {id: 3, name: "Butter", count: 100,}];
let carts=[]
let input="";
while(input!=="E"){
    input= prompt("Nhập vào chữ cái C/R/U/D/E").toUpperCase();
    if (input=="C") {
        let productName= prompt("Nhập vào tên sản phẩm muốn mua");
        let stroreIndex=stores.findIndex((item)=>item.name==productName);
        if (stroreIndex !== -1&& stores[stroreIndex].count>0) {
           carts.push(stores[stroreIndex]) ;
           stores[stroreIndex].count--;
           console.log(`Thêm sản phẩm ${productName} vào giỏ hàng thành công`);
        }else{
           console.log(`Sản phẩm ${productName} không có hoặc đã hết hàng`);

        }
    }else if(input=="R"){
        console.log("Danh sách sản phẩm trong cửa hàng");
        stores.forEach((item)=>{
            console.log(`ID:${item.id},Name:${item.name},Count:${item.count}`);
        });
        console.log("Danh sách trong giỏ hàng");
        carts.forEach((item)=>{
            console.log(`ID:${item.id},Name:${item.name},Count:${item.count}`);
        });
    } else if(input=="U"){
        let cartIndex = prompt("Nhập vào vị trí cần update trong giỏ hàng") -1;
        if (cartIndex >= 0 && cartIndex < carts.length) {
      const newCount = parseInt(prompt("Nhập vào số lượng muốn thay đổi:"));

      if (!isNaN(newCount) && newCount >= 0) {
        const storeIndex = stores.findIndex((item) => item.id === carts[cartIndex].id);

        if (storeIndex !== -1) {
          stores[storeIndex].count += carts[cartIndex].count - newCount;
          carts[cartIndex].count = newCount;
          console.log("Cập nhật giỏ hàng thành công.");

          console.log("Danh sách sản phẩm trong cửa hàng sau khi cập nhật:");
          stores.forEach((item) => {
            console.log(`ID: ${item.id}, Name: ${item.name}, Count: ${item.count}`);
          });

          console.log("Danh sách sản phẩm trong giỏ hàng sau khi cập nhật:");
          carts.forEach((item) => {
            console.log(`ID: ${item.id}, Name: ${item.name}, Count: ${item.count}`);
          });
        } else {
          console.log("Sản phẩm không tồn tại trong cửa hàng.");
        }
      } else {
        console.log("Số lượng nhập vào không hợp lệ.");
      }
    } else {
      console.log("Vị trí cần update không hợp lệ.");
    }
    }else if (input === "D") {
    const cartIndex = prompt("Nhập vào vị trí của sản phẩm muốn xóa trong giỏ hàng:") - 1;

    if (cartIndex >= 0 && cartIndex < carts.length) {
      const storeIndex = stores.findIndex((item) => item.id === carts[cartIndex].id);

      if (storeIndex !== -1) {
        stores[storeIndex].count += carts[cartIndex].count;
        carts.splice(cartIndex, 1);
        console.log("Xóa sản phẩm khỏi giỏ hàng thành công.");

        console.log("Danh sách sản phẩm trong cửa hàng sau khi xóa:");
        stores.forEach((item) => {
          console.log(`ID: ${item.id}, Name: ${item.name}, Count: ${item.count}`);
        });

        console.log("Danh sách sản phẩm trong giỏ hàng sau khi xóa:");
        carts.forEach((item) => {
          console.log(`ID: ${item.id}, Name: ${item.name}, Count: ${item.count}`);
        });
      } else {
        console.log("Sản phẩm không tồn tại trong cửa hàng.");
      }
    } else {
      console.log("Vị trí cần xóa không hợp lệ.");
    }
  } else if (input === "E") {
    console.log("Cảm ơn bạn đã đến với Rikkei Stores.");
  } else {
    console.log("Chữ cái không hợp lệ.");
}
}
    </script>
</body>
</html>